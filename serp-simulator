import textwrap
from IPython.display import display, HTML
import ipywidgets as widgets

def serp_simulator(title, description, url):
    title_length = 60
    description_length = 160

    wrapped_title = textwrap.shorten(title, width=title_length, placeholder="...")
    wrapped_description = textwrap.shorten(description, width=description_length, placeholder="...")

    serp_html = f"""
    <div style="font-family: Arial, sans-serif; margin: 20px; border: 1px solid #dfe1e5; border-radius: 8px; padding: 16px; width: 600px;">
        <div style="color: #1a0dab; font-size: 18px; font-weight: normal; text-decoration: none;">{wrapped_title}</div>
        <div style="color: #006621; font-size: 14px; margin-top: 4px;">{url}</div>
        <div style="color: #545454; font-size: 14px; margin-top: 8px;">{wrapped_description}</div>
    </div>
    """
    display(HTML(serp_html))

# Create the input widgets
title_input = widgets.Text(
    value='',
    placeholder='Enter the title here',
    description='Title:',
    disabled=False
)

description_input = widgets.Textarea(
    value='',
    placeholder='Enter the description here',
    description='Description:',
    disabled=False
)

url_input = widgets.Text(
    value='',
    placeholder='Enter the URL here',
    description='URL:',
    disabled=False
)

button = widgets.Button(description="Simulate SERP")
output = widgets.Output()

# Define what happens when the button is clicked
def on_button_clicked(b):
    with output:
        output.clear_output()
        serp_simulator(title_input.value, description_input.value, url_input.value)

button.on_click(on_button_clicked)

# Display the widgets
display(title_input, description_input, url_input, button, output)
